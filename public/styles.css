:root{
	--bg: #ffffff;
	--card: #ffffff;
	--muted: #6b7280;
	--accent: #4f46e5;
	--accent-2: #06b6d4;
	--surface: #ffffff;
	--glass: rgba(15,23,42,0.03);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
	margin:0;
	font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
	background: var(--bg);
	color:#111827;
	-webkit-font-smoothing:antialiased;
	padding:24px;
}
header{max-width:1100px;margin:0 auto 18px}
header h1{font-size:1.6rem;margin:0 0 6px}
header p{margin:0;color:var(--muted)}

main{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:20px;align-items:start}

.card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(15,23,42,0.06);border:1px solid rgba(15,23,42,0.06)}

form label{display:block;font-size:0.9rem;color:var(--muted);margin-bottom:8px}
input[type=text],textarea,input[type=search]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(15,23,42,0.06);background:#f8fafc;color:inherit}
textarea{min-height:80px;resize:vertical}
.row{display:flex;gap:8px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:10px;border:none;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;cursor:pointer}
.btn.secondary{background:transparent;border:1px solid rgba(15,23,42,0.06);color:var(--muted)}
.muted{color:var(--muted)}

#form-section .card{position:sticky;top:24px}

#list-section .search-wrap{display:flex;gap:8px;align-items:center;margin-bottom:12px}
#search{flex:1}

#cabinets{list-style:none;padding:0;margin:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
#cabinets li{padding:12px;border-radius:10px;background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);border:1px solid rgba(255,255,255,0.02);transition:transform .12s ease,box-shadow .12s ease}
#cabinets li:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(2,6,23,0.6)}
#cabinets h3{margin:0 0 6px;font-size:1rem}
.desc{color:var(--muted);font-size:0.9rem;margin-bottom:8px}
.meta{font-size:0.8rem;color:var(--muted)}
.actions{display:flex;gap:8px;margin-top:8px}

/* cabinet visualization badges */
.cabinet-viz { margin-top: .75rem; font-size: .9rem; }
.viz-row { margin: .25rem 0; }
.badge { display:inline-block; padding:2px 6px; border-radius:3px; color:#fff; font-size:0.8rem; }
.badge.online { background:#28a745; }
.badge.offline { background:#dc3545; }
.badge.unknown { background:#6c757d; }

.rack-card { cursor: pointer; }

.empty{padding:20px;text-align:center;color:var(--muted)}

@media (max-width:880px){
	main{grid-template-columns:1fr}
	#form-section .card{position:static}
}

/* small helpers */
.tiny{font-size:0.85rem;color:var(--muted)}

/* DCIM layout additions */
.app-shell{display:flex;gap:20px;align-items:flex-start}
.sidebar{width:220px;flex:0 0 220px;display:flex;flex-direction:column;gap:16px}
.brand h2{margin:0}
.nav{display:flex;flex-direction:column;gap:8px}
.nav a{padding:8px 10px;border-radius:8px;color:inherit;cursor:pointer}
.nav a.active{background:rgba(255,255,255,0.04)}
/* details-based submenu for remote tools */
details.nav-group{position:relative}
details.nav-group summary{list-style:none;cursor:pointer;padding:8px 10px;border-radius:8px}
details.nav-group[open] summary{background:rgba(255,255,255,0.02)}
.nav-children{display:flex;flex-direction:column;padding-left:8px;margin-top:6px;gap:6px}
.nav-children a{padding:6px 10px;border-radius:6px;font-size:0.95rem;color:var(--muted)}
.nav-children a.active{background:rgba(79,70,229,0.08);color:inherit}
.main-area{flex:1;display:flex;flex-direction:column;gap:12px}
.topbar{display:flex;justify-content:space-between;align-items:center;padding:12px}
.content{display:grid;grid-template-columns:1fr 360px;gap:18px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
.rack-card{padding:12px;border-radius:10px;background:#ffffff;cursor:pointer;border:1px solid rgba(15,23,42,0.06);box-shadow:0 6px 12px rgba(15,23,42,0.04)}

/* Rack view styles */
.rack{display:flex;flex-direction:column;gap:6px}
.rack-slot{display:flex;align-items:center;border:1px solid rgba(15,23,42,0.04);padding:6px;border-radius:6px;background:#fff}
.rack-slot .u-label{width:60px;font-weight:600;color:var(--muted)}
.rack-slot .u-body{flex:1;min-height:28px}
.rack-device{display:inline-block;padding:4px 8px;background:#eef2ff;border-radius:4px;border:1px solid rgba(79,70,229,0.12);cursor:grab}
.rack-slot.drag-over{outline:2px dashed rgba(79,70,229,0.4)}

/* rack-device multi-U appearance */
.rack-device{background:linear-gradient(180deg,#eef2ff,#eef8ff);padding:6px;border-radius:6px}
.rack-slot .u-body .rack-device{display:block}
.rack-slot{overflow:hidden}

/* mini rack inside cabinet cards */
.mini-rack{display:flex;flex-direction:column-reverse;gap:2px;margin-top:8px;width:24px}
.mini-slot{display:block;width:18px;height:6px;border-radius:2px;background:#e9ecef;border:1px solid rgba(15,23,42,0.04)}
.mini-slot.occupied{background:#28a745}
.mini-slot.empty{background:#f1f5f9}
.mini-slot{display:inline-flex;align-items:center;justify-content:center;font-size:11px;color:#fff;height:20px;width:36px;padding:2px 4px;box-sizing:border-box;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.mini-slot.empty{color:var(--muted);background:#f1f5f9;border:1px solid rgba(15,23,42,0.04)}
.mini-slot.occupied{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:white;border:1px solid rgba(0,0,0,0.06)}
.mini-rack{display:flex;flex-direction:column-reverse;gap:4px;margin-top:8px;width:40px}
.cabinet-viz .device-list{margin-top:8px;max-height:120px;overflow:auto}
.cabinet-viz .device-list .tiny{margin:2px 0;font-size:0.85rem}

.cabinet-head{display:flex;justify-content:space-between;align-items:center}

@media (max-width:980px){
	.app-shell{flex-direction:column}
	.sidebar{width:auto;flex-direction:row;align-items:center;padding:12px}
	.content{grid-template-columns:1fr}
}

/* widgets */
.dashboard-widgets .widget{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;min-width:160px;background:#fff;border:1px solid rgba(15,23,42,0.04);box-shadow:0 6px 12px rgba(15,23,42,0.03)}
.dashboard-widgets .widget-left{width:44px;height:44px;display:flex;align-items:center;justify-content:center;border-radius:8px;background:linear-gradient(180deg,rgba(79,70,229,0.12),rgba(6,182,212,0.06))}
.dashboard-widgets .widget .widget-body{display:flex;flex-direction:column}

button.small{padding:6px 8px;font-size:0.85rem}

/* 固定环境曲线画布高度，防止 Chart.js 在响应式调整时导致容器高度累加 */
#env-chart{display:block;width:100%;max-width:800px;height:200px!important;}

